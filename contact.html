<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contacto - Buscaminas</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body class="light">
  <main style="max-width:700px;margin:40px auto;padding:20px;">
    <h1>Contacto</h1>
    <form id="contact-form" novalidate>
      <label>Nombre</label><br>
      <input id="contact-name" type="text" /><br>
      <small id="contact-name-error" class="error"></small><br>

      <label>Email</label><br>
      <input id="contact-email" type="email" /><br>
      <small id="contact-email-error" class="error"></small><br>

      <label>Mensaje</label><br>
      <textarea id="contact-message" rows="6"></textarea><br>
      <small id="contact-message-error" class="error"></small><br>

      <div style="margin-top:10px;">
        <button id="contact-send" class="btn" type="button">Enviar</button>
        <a href="index.html" class="btn" style="background:#666;">Volver</a>
      </div>
    </form>
  </main>

  <script type="module">
    import { isValidContactName, isValidEmail, isValidMessage } from './scripts/validation.js';

    (function(){
      var nameEl = document.getElementById('contact-name');
      var emailEl = document.getElementById('contact-email');
      var msgEl = document.getElementById('contact-message');
      var sendBtn = document.getElementById('contact-send');

      sendBtn.onclick = function(){
        var ok = true;
        document.getElementById('contact-name-error').textContent = '';
        document.getElementById('contact-email-error').textContent = '';
        document.getElementById('contact-message-error').textContent = '';

        if (!isValidContactName(nameEl.value)) { document.getElementById('contact-name-error').textContent = 'Nombre inválido'; ok = false; }
        if (!isValidEmail(emailEl.value)) { document.getElementById('contact-email-error').textContent = 'Email inválido'; ok = false; }
        if (!isValidMessage(msgEl.value)) { document.getElementById('contact-message-error').textContent = 'Mensaje muy corto'; ok = false; }

        if (!ok) return;

        var mailto = 'mailto:tuemail@dominio.com'
          + '?subject=' + encodeURIComponent('Contacto Buscaminas - ' + nameEl.value)
          + '&body=' + encodeURIComponent('Nombre: ' + nameEl.value + '\nEmail: ' + emailEl.value + '\n\n' + msgEl.value);

        window.location.href = mailto;
      };
    }());
  </script>
</body>
</html>
